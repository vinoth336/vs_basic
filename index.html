<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vs Vegetables - Fresh Farm to Door</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .language-switcher {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .cart-icon {
            position: relative;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.8rem;
            min-width: 18px;
            text-align: center;
        }



        /* Category Section */
        .category-section {
            background: #f8f9fa;
            padding: 50px 0 30px 0;
        }

        .category-menu {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
        }

        .category-tabs {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding: 10px 5px;
            scrollbar-width: thin;
            scrollbar-color: #28a745 #f1f1f1;
        }

        .category-tabs::-webkit-scrollbar {
            height: 6px;
        }

        .category-tabs::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .category-tabs::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #28a745, #20c997);
            border-radius: 3px;
        }

        .tab-btn {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px solid #e0e0e0;
            padding: 15px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-weight: 600;
            color: #333;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            flex-shrink: 0;
            min-width: fit-content;
        }

        .tab-btn i {
            font-size: 1.8rem;
            margin-bottom: 2px;
        }

        .tab-btn span {
            line-height: 1.2;
        }

        .tab-btn:hover {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-color: #28a745;
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(40, 167, 69, 0.3);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-color: #28a745;
            box-shadow: 0 8px 15px rgba(40, 167, 69, 0.3);
            transform: translateY(-2px);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            text-align: center;
            padding: 4rem 0;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Products Section */
        .products-section {
            padding: 3rem 0;
            background: #f8f9fa;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: #28a745;
            font-weight: 600;
        }

        .category-title {
            font-size: 1.8rem;
            margin-bottom: 2rem;
            color: #28a745;
            font-weight: 600;
        }

        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.2);
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #e9ecef, #f8f9fa);
            border-radius: 10px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #28a745;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        .product-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .product-unit {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .product-price {
            font-size: 1.4rem;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 1rem;
        }

        .qty-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .qty-btn {
            width: 35px;
            height: 35px;
            border: 2px solid #28a745;
            background: white;
            color: #28a745;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .qty-btn:hover {
            background: #28a745;
            color: white;
        }

        .quantity {
            font-size: 1.2rem;
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }

        .add-to-cart-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }

        .add-to-cart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        /* Frozen Footer Cart */
        .frozen-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 20px rgba(0,0,0,0.1);
            z-index: 1000;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .frozen-footer.show {
            transform: translateY(0);
        }

        .footer-cart-summary {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .footer-cart-info {
            display: flex;
            flex-direction: column;
        }

        .footer-cart-items {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .footer-cart-total {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .footer-cart-arrow {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .footer-cart-arrow.up {
            transform: rotate(180deg);
        }

        /* Order Summary Slide Up */
        .order-summary-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .order-summary-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .order-summary-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 20px 20px 0 0;
            max-height: 80vh;
            overflow-y: auto;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 1002;
        }

        .order-summary-panel.show {
            transform: translateY(0);
        }

        .order-summary-header {
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: white;
            z-index: 1003;
        }

        .order-summary-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #28a745;
        }

        .close-summary {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .order-summary-content {
            padding: 20px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: #28a745;
            font-weight: bold;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .remove-item-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .order-total {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }

        .total-amount {
            font-size: 1.8rem;
            font-weight: bold;
            color: #28a745;
        }

        .delivery-time {
            margin: 20px 0;
        }

        .delivery-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .delivery-option {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .delivery-option.selected {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .place-order-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: 600;
            width: 100%;
            margin-top: 20px;
        }

        /* Contact Section */
        .contact {
            background: #28a745;
            color: white;
            padding: 3rem 0;
        }

        .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .contact-item {
            text-align: center;
            padding: 2rem;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
        }

        .contact-item i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .products {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.8rem;
            }

            .product-card {
                padding: 0.8rem;
            }

            .product-name {
                font-size: 0.9rem;
            }

            .product-price {
                font-size: 1rem;
            }

            .qty-btn {
                width: 30px;
                height: 30px;
                font-size: 1rem;
            }

            .category-section {
                padding: 20px 0;
            }

            .category-menu {
                padding: 15px;
            }

            .tab-btn {
                font-size: 0.7rem;
                padding: 10px 12px;
                min-width: 80px;
                gap: 4px;
            }

            .tab-btn i {
                font-size: 1.2rem;
            }

            .category-tabs {
                gap: 8px;
                padding: 8px;
            }

            .quantity-controls {
                gap: 6px;
                padding: 6px;
            }

            .qty-minus, .qty-plus {
                width: 28px;
                height: 28px;
                font-size: 1rem;
            }

            .qty-display {
                min-width: 35px;
                font-size: 1rem;
            }

            .search-filter-section {
                padding: 15px;
                margin-bottom: 20px;
            }

            .search-box {
                max-width: 100%;
            }

            .search-box input {
                padding: 12px 40px 12px 35px;
                font-size: 0.9rem;
            }

            .search-box i.fa-search {
                left: 12px;
                font-size: 1rem;
            }

            .clear-search {
                right: 12px;
            }



            .search-results-info {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .categories-submenu {
                padding: 15px 0;
                position: sticky;
                top: 0;
            }

            .submenu-header h3 {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }

            .submenu-categories {
                gap: 15px;
                padding: 0 20px;
            }

            .submenu-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
                min-width: 130px;
            }

            .category-title {
                font-size: 1.4rem;
            }

            .delivery-options {
                grid-template-columns: 1fr;
            }

            .product-image {
                height: 120px;
                font-size: 2rem;
            }

            .language-switcher {
                min-width: 40px;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .products {
                gap: 0.5rem;
            }

            .product-card {
                padding: 0.6rem;
            }

            .product-name {
                font-size: 0.8rem;
            }

            .product-price {
                font-size: 0.9rem;
            }

            .product-image {
                height: 100px;
                font-size: 1.8rem;
            }
        }

        .category-section {
            display: none;
        }

        .category-section.active {
            display: block;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .no-results {
            text-align: center;
            padding: 3rem;
            color: #666;
        }

        .no-results h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .add-to-cart-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Quantity Badge */
        .qty-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            box-shadow: 0 2px 8px rgba(220, 53, 69, 0.4);
            z-index: 10;
        }

        /* Product Status Badges */
        .status-badges {
            position: absolute;
            top: 8px;
            left: 8px;
            display: flex;
            flex-direction: column;
            gap: 4px;
            z-index: 15;
        }

        .badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            color: white;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .badge.new-arrival {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .badge.combo {
            background: linear-gradient(135deg, #fd7e14, #e55c12);
        }

        /* Special Offer Display */
        .special-offer {
            position: absolute;
            top: 0;
            right: 0;
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            padding: 6px 10px;
            font-size: 0.75rem;
            font-weight: bold;
            border-radius: 0 10px 0 10px;
            transform: rotate(0deg);
            box-shadow: 0 3px 10px rgba(220, 53, 69, 0.3);
            z-index: 20;
        }

        /* Unavailable Product Styling */
        .product-card.unavailable {
            opacity: 0.6;
            position: relative;
        }

        .product-card.unavailable::after {
            content: 'Out of Stock';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 25;
        }

        .product-card.unavailable .add-to-cart-btn,
        .product-card.unavailable .quantity-controls {
            pointer-events: none;
            opacity: 0.5;
        }

        /* Multiple Image Support */
        .product-image {
            position: relative;
            overflow: hidden;
        }

        .product-image-gallery {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .product-image-gallery img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s ease;
        }

        .product-image-gallery img:hover {
            transform: scale(1.05);
        }

        .image-indicator {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            gap: 2px;
        }

        .image-indicator i {
            font-size: 0.6rem;
        }

        /* Combo Product Details */
        .combo-details {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 8px;
            font-size: 0.8rem;
            color: #666;
        }

        .combo-items {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .combo-item {
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
        }

        .product-card {
            cursor: pointer;
            user-select: none;
        }

        .product-card:active {
            transform: translateY(-3px) scale(0.98);
        }

        /* Quantity Controls */
        .quantity-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 10px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 20px;
        }

        .qty-minus, .qty-plus {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .qty-minus:hover, .qty-plus:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        .qty-display {
            min-width: 40px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            color: #333;
        }

        .add-item-hint {
            text-align: center;
            color: #6c757d;
            font-size: 0.8rem;
            margin-top: 8px;
            padding: 4px;
        }

        /* Search and Filter Styles */
        .search-filter-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-box {
            position: relative;
            max-width: 500px;
            margin: 0 auto;
        }

        .search-box i.fa-search {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-size: 1.1rem;
        }

        .search-box input {
            width: 100%;
            padding: 15px 50px 15px 45px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .search-box input:focus {
            outline: none;
            border-color: #28a745;
            background: white;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
        }

        .clear-search {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #666;
            font-size: 1.1rem;
            cursor: pointer;
            display: none;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .clear-search:hover {
            background: #f0f0f0;
            color: #333;
        }

        .clear-search.show {
            display: block;
        }



        .search-results-info {
            background: #e8f5e8;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #155724;
            font-weight: 600;
        }


        /* Budget Pick Styles */
        .product-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .add-to-cart-btn {
            flex: 1;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-to-cart-btn:hover {
            background: linear-gradient(135deg, #20c997, #28a745);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        .budget-pick-btn {
            flex: 1;
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .budget-pick-btn:hover {
            background: linear-gradient(135deg, #ff8e53, #ff6b6b);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
        }

        .budget-pick-btn::before {
            content: "üí∞";
            margin-right: 5px;
        }

        .combo-btn {
            flex: 1;
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .combo-btn:hover {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(142, 68, 173, 0.3);
        }

        .combo-btn::before {
            content: "üîó";
            margin-right: 5px;
        }

        .badge-combo {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            position: absolute;
            top: 8px;
            right: 8px;
        }

        .combo-details {
            margin: 8px 0;
            padding: 8px;
            background: rgba(142, 68, 173, 0.1);
            border-radius: 8px;
            border-left: 3px solid #8e44ad;
        }

        .combo-label {
            color: #8e44ad;
            font-weight: 600;
            font-size: 0.8rem;
            display: block;
            margin-bottom: 4px;
        }

        .combo-items-list {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .combo-item {
            background: rgba(142, 68, 173, 0.2);
            color: #8e44ad;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .combo-more {
            background: rgba(142, 68, 173, 0.3);
            color: #8e44ad;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-style: italic;
        }

        .product-info {
            text-align: center;
            margin-bottom: 10px;
        }

        .price-unit {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .price-unit .product-price {
            margin: 0;
            font-size: 1.3rem;
        }

        .price-unit .product-unit {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }

        /* Budget Pick Popup Styles */
        .budget-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }

        .budget-popup {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
            position: relative;
        }

        .budget-popup-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .budget-popup-title {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 10px;
        }

        .budget-popup-subtitle {
            color: #666;
            font-size: 0.9rem;
        }

        .budget-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .budget-option {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            padding: 15px 10px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .budget-option:hover {
            background: linear-gradient(135deg, #ff8e53, #ff6b6b);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        .budget-option-amount {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .budget-option-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .budget-popup-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #999;
            cursor: pointer;
            padding: 5px;
            line-height: 1;
        }

        .budget-popup-close:hover {
            color: #333;
        }

        .budget-popup-footer {
            text-align: center;
            margin-top: 20px;
        }

        .budget-popup-cancel {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e9ecef;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .budget-popup-cancel:hover {
            background: #e9ecef;
            color: #333;
        }

        /* Combo Popup Styles */
        .combo-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }

        .combo-popup {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
            position: relative;
        }

        .combo-popup-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .combo-popup-title {
            font-size: 1.5rem;
            color: #8e44ad;
            margin-bottom: 10px;
        }

        .combo-popup-subtitle {
            color: #666;
            font-size: 0.9rem;
        }

        .combo-items-section {
            margin: 20px 0;
        }

        .combo-section-title {
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .combo-item-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .combo-price-input {
            width: 80px;
            padding: 6px 8px;
            border: 2px solid #8e44ad;
            border-radius: 6px;
            text-align: center;
            font-weight: 600;
        }

        .combo-total {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .combo-popup-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .combo-popup-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #999;
            cursor: pointer;
            padding: 5px;
            line-height: 1;
        }

        .combo-popup-close:hover {
            color: #333;
        }

        .show-all-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .show-all-btn:hover {
            background: #218838;
        }

        /* Categories Submenu Styles */
        .categories-submenu {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px 0;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .submenu-header h3 {
            text-align: center;
            color: #28a745;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .submenu-categories {
            display: flex;
            overflow-x: auto;
            overflow-y: hidden;
            gap: 20px;
            padding: 0 30px;
            scroll-behavior: smooth;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }

        .submenu-categories::-webkit-scrollbar {
            display: none; /* Chrome, Safari and Opera */
        }

        .submenu-btn {
            background: white;
            color: #333;
            border: 2px solid #e0e0e0;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 140px;
            text-align: center;
        }

        .submenu-btn:hover {
            border-color: #28a745;
            color: #28a745;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.2);
        }

        .submenu-btn.active {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-color: #28a745;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }

        .submenu-btn.active:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(40, 167, 69, 0.4);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="nav">
                <div class="logo" data-lang="logo">Vs Vegetables</div>
                <div class="nav-right">
                    <button class="language-switcher" id="languageSwitcher" onclick="toggleLanguage()">
                        ‡Æ§
                    </button>
                    <div class="cart-icon" onclick="toggleOrderSummary()">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                </div>
            </nav>
        </div>
    </header>



    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1 data-lang="heroTitle">Fresh Vegetables Delivered to Your Door</h1>
            <p data-lang="heroSubtitle">Farm-fresh produce delivered within hours. Quality guaranteed!</p>
        </div>
    </section>

    <!-- Category Menu Section -->
    <section class="category-section">
        <div class="container">
            <div class="category-menu">
                <div class="category-tabs" id="categoryTabs">
                    <!-- Categories will be dynamically generated from config -->
                </div>
            </div>
        </div>
    </section>


    <!-- Categories Submenu Section -->
    <section class="categories-submenu">
        <div class="container">
            <div class="submenu-header">
                <h3 data-lang="categoriesMenu">Categories</h3>
            </div>
            <div class="submenu-categories">
                <!-- Submenu categories will be dynamically generated from config -->
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products-section">
        <div class="container">

            
            <!-- Search and Filter Section -->
            <div class="search-filter-section">
                <div class="search-container">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Search vegetables..." data-lang-placeholder="searchPlaceholder">
                        <button class="clear-search" id="clearSearch" onclick="clearSearch()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

            </div>
            
            <!-- Search Results Info -->
            <div class="search-results-info" id="searchResultsInfo" style="display: none;">
                <span id="resultsCount">0</span> <span data-lang="resultsFound">results found</span>
                <button class="show-all-btn" onclick="showAllProducts()" data-lang="showAll">Show All</button>
            </div>
            
            <!-- Category Sections -->
            <div id="categoryContent">
                <!-- Categories will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact">
        <div class="container">
            <h2 class="section-title" data-lang="contactTitle">Contact Us</h2>
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <h3 data-lang="phone">Phone</h3>
                    <p>+91 83008 13853</p>
                </div>
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <h3 data-lang="email">Email</h3>
                    <p>orders@vsvegetables.com</p>
                </div>
                <div class="contact-item">
                    <i class="fab fa-whatsapp"></i>
                    <h3 data-lang="whatsapp">WhatsApp</h3>
                    <p>+91 83008 13853</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Budget Pick Popup -->
    <div class="budget-popup-overlay" id="budgetPopup">
        <div class="budget-popup">
            <button class="budget-popup-close" onclick="closeBudgetPopup()">&times;</button>
            <div class="budget-popup-header">
                <h3 class="budget-popup-title" id="budgetProductName">Budget Pick</h3>
                <p class="budget-popup-subtitle">Choose your budget amount</p>
            </div>
            <div class="budget-options" id="budgetOptions">
                <!-- Budget options will be populated by JavaScript -->
            </div>
            <div class="budget-popup-footer">
                <button class="budget-popup-cancel" onclick="closeBudgetPopup()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Combo Popup -->
    <div class="combo-popup-overlay" id="comboPopup">
        <div class="combo-popup">
            <button class="combo-popup-close" onclick="closeComboPopup()">&times;</button>
            <div id="comboPopupContent">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Frozen Footer Cart -->
    <div class="frozen-footer" id="frozenFooter">
        <div class="footer-cart-summary" onclick="toggleOrderSummary()">
            <div class="footer-cart-info">
                <div class="footer-cart-items" id="footerCartItems" data-lang="cartItems">0 items in cart</div>
                <div class="footer-cart-total" id="footerCartTotal">‚Çπ0</div>
            </div>
            <div class="footer-cart-arrow" id="footerCartArrow">
                <i class="fas fa-chevron-up"></i>
            </div>
        </div>
    </div>

    <!-- Order Summary Overlay -->
    <div class="order-summary-overlay" id="orderSummaryOverlay" onclick="closeOrderSummary()">
        <div class="order-summary-panel" id="orderSummaryPanel" onclick="event.stopPropagation()">
            <div class="order-summary-header">
                <h3 class="order-summary-title" data-lang="orderSummary">Order Summary</h3>
                <button class="close-summary" onclick="closeOrderSummary()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="order-summary-content">
                <div id="cartItems">
                    <!-- Cart items will be populated here -->
                </div>
                
                <div class="order-total">
                    <div data-lang="total">Total: </div>
                    <div class="total-amount" id="orderTotal">‚Çπ0</div>
                </div>

                <div class="delivery-time">
                    <h4 data-lang="deliveryTime">Select Delivery Time:</h4>
                    <div class="delivery-options">
                        <div class="delivery-option" onclick="selectDeliveryTime('Morning (6:00 to 9:00 AM)')">
                            <div data-lang="morning">Morning</div>
                            <div>6:00 to 9:00 AM</div>
                        </div>
                        <div class="delivery-option" onclick="selectDeliveryTime('Afternoon (1:30 to 2:30 PM)')">
                            <div data-lang="afternoon">Afternoon</div>
                            <div>1:30 to 2:30 PM</div>
                        </div>
                        <div class="delivery-option" onclick="selectDeliveryTime('Evening (After 7:00 PM)')">
                            <div data-lang="evening">Evening</div>
                            <div>After 7:00 PM</div>
                        </div>
                        <div class="delivery-option" onclick="selectDeliveryTime('Express (Next 30 minutes)')">
                            <div data-lang="express">Express</div>
                            <div data-lang="expressTime">Next 30 mins</div>
                        </div>
                    </div>
                </div>

                <button class="place-order-btn" onclick="placeOrder()" data-lang="placeOrder">
                    Place Order via WhatsApp
                </button>
            </div>
        </div>
    </div>

    <script>
        // Configuration loader - tries external config.json first, falls back to embedded
        let config = null;
        
        // Fallback embedded configuration
        const fallbackConfig = {
            products: {
                ooty: [
                    { 
                        name: { en: "Fresh Carrots", ta: "‡Æï‡Øá‡Æ∞‡Æü‡Øç" }, 
                        price: 80, unit: "Kg", icon: "ü•ï", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Green Beans", ta: "‡Æ™‡ØÄ‡Æ©‡Øç‡Æ∏‡Øç" }, 
                        price: 60, unit: "Kg", icon: "ü´ò", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Bell Peppers", ta: "‡Æï‡ØÅ‡Æü‡ÆÆ‡Æø‡Æ≥‡Æï‡Ææ‡ÆØ‡Øç" }, 
                        price: 120, unit: "Kg", icon: "ü´ë", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    }
                ],
                country: [
                    { 
                        name: { en: "Okra (Bhindi)", ta: "‡Æµ‡ØÜ‡Æ£‡Øç‡Æü‡Øà‡Æï‡Øç‡Æï‡Ææ‡ÆØ‡Øç" }, 
                        price: 40, unit: "Kg", icon: "üå∂Ô∏è", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Eggplant", ta: "‡Æï‡Æ§‡Øç‡Æ§‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Ææ‡ÆØ‡Øç" }, 
                        price: 35, unit: "Kg", icon: "üçÜ", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Ridge Gourd", ta: "‡Æ™‡ØÄ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æô‡Øç‡Æï‡Ææ‡ÆØ‡Øç" }, 
                        price: 45, unit: "Kg", icon: "ü•í", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    }
                ],
                onions: [
                    { 
                        name: { en: "Big Onions", ta: "‡Æ™‡ØÜ‡Æ∞‡Æø‡ÆØ ‡Æµ‡ØÜ‡Æô‡Øç‡Æï‡Ææ‡ÆØ‡ÆÆ‡Øç" }, 
                        price: 30, unit: "Kg", icon: "üßÖ", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Small Onions", ta: "‡Æö‡Æø‡Æ©‡Øç‡Æ© ‡Æµ‡ØÜ‡Æô‡Øç‡Æï‡Ææ‡ÆØ‡ÆÆ‡Øç" }, 
                        price: 80, unit: "Kg", icon: "üßÖ", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Red Onions", ta: "‡Æö‡Æø‡Æµ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æµ‡ØÜ‡Æô‡Øç‡Æï‡Ææ‡ÆØ‡ÆÆ‡Øç" }, 
                        price: 35, unit: "Kg", icon: "üßÖ", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    }
                ],
                spinach: [
                    { 
                        name: { en: "Fresh Spinach", ta: "‡Æ™‡Æö‡Æ≤‡Øà‡Æï‡Øç‡Æï‡ØÄ‡Æ∞‡Øà" }, 
                        price: 25, unit: "Bunch", icon: "ü•¨", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Mint Leaves", ta: "‡Æ™‡ØÅ‡Æ§‡Æø‡Æ©‡Ææ" }, 
                        price: 15, unit: "Bunch", icon: "üåø", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: true, budgetOptions: [5, 10, 15] 
                    },
                    { 
                        name: { en: "Coriander", ta: "‡Æï‡Øä‡Æ§‡Øç‡Æ§‡ÆÆ‡Æ≤‡Øç‡Æ≤‡Æø" }, 
                        price: 10, unit: "Bunch", icon: "üåø", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: true, budgetOptions: [5, 10, 15] 
                    }
                ],
                coconuts: [
                    { 
                        name: { en: "Fresh Coconut", ta: "‡Æ§‡Øá‡Æô‡Øç‡Æï‡Ææ‡ÆØ‡Øç" }, 
                        price: 40, unit: "Pcs", icon: "ü••", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Tender Coconut", ta: "‡Æá‡Æ≥‡Æ®‡ØÄ‡Æ∞‡Øç" }, 
                        price: 30, unit: "Pcs", icon: "ü••", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Grated Coconut", ta: "‡Æ§‡Øá‡Æô‡Øç‡Æï‡Ææ‡ÆØ‡Øç ‡Æ§‡ØÅ‡Æ∞‡ØÅ‡Æµ‡Æ≤‡Øç" }, 
                        price: 25, unit: "Grams", icon: "ü••", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    }
                ],
                nuts: [
                    { 
                        name: { en: "Almonds", ta: "‡Æ™‡Ææ‡Æ§‡Ææ‡ÆÆ‡Øç" }, 
                        price: 800, unit: "Kg", icon: "ü•ú", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Cashews", ta: "‡ÆÆ‡ØÅ‡Æ®‡Øç‡Æ§‡Æø‡Æ∞‡Æø" }, 
                        price: 600, unit: "Kg", icon: "ü•ú", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Dates", ta: "‡Æ™‡Øá‡Æ∞‡ØÄ‡Æö‡Øç‡Æö‡ÆÆ‡Øç‡Æ™‡Æ¥‡ÆÆ‡Øç" }, 
                        price: 300, unit: "Kg", icon: "üå∞", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    }
                ],
                budget: [
                    { 
                        name: { en: "Budget Tomatoes", ta: "‡Æ§‡Æï‡Øç‡Æï‡Ææ‡Æ≥‡Æø (‡Æ™‡Æü‡Øç‡Æú‡ØÜ‡Æü‡Øç)" }, 
                        price: 20, unit: "Kg", icon: "üçÖ", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Budget Potatoes", ta: "‡Æâ‡Æ∞‡ØÅ‡Æ≥‡Øà‡Æï‡Øç‡Æï‡Æø‡Æ¥‡Æô‡Øç‡Æï‡ØÅ (‡Æ™‡Æü‡Øç‡Æú‡ØÜ‡Æü‡Øç)" }, 
                        price: 15, unit: "Kg", icon: "ü•î", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: false 
                    },
                    { 
                        name: { en: "Curry Leaves", ta: "‡Æï‡Æ±‡Æø‡Æµ‡Øá‡Æ™‡Øç‡Æ™‡Æø‡Æ≤‡Øà" }, 
                        price: 8, unit: "Bunch", icon: "üåø", image: "attached_assets/carrot_1756286601381.jpg", isBudgetPick: true, budgetOptions: [20, 25, 50] 
                    }
                ]
            },
            localization: {
                en: {
                    logo: "Vs Vegetables",
                    allCategories: "All",
                    ooty: "Ooty Vegetables",
                    country: "Country Vegetables",
                    onions: "Onions & Small Onions",
                    spinach: "Spinach",
                    coconuts: "Coconuts",
                    nuts: "Nuts & Dry Fruits",
                    budget: "Budget Veggies",
                    heroTitle: "Fresh Vegetables Delivered to Your Door",
                    heroSubtitle: "Farm-fresh produce delivered within hours. Quality guaranteed!",
                    productsTitle: "Our Fresh Products",
                    contactTitle: "Contact Us",
                    phone: "Phone",
                    email: "Email",
                    whatsapp: "WhatsApp",
                    addToCart: "Add to Cart",
                    cartItems: "items in cart",
                    orderSummary: "Order Summary",
                    total: "Total: ",
                    deliveryTime: "Select Delivery Time:",
                    morning: "Morning",
                    afternoon: "Afternoon",
                    evening: "Evening",
                    express: "Express",
                    expressTime: "Next 30 mins",
                    placeOrder: "Place Order via WhatsApp",
                    remove: "Remove",
                    searchPlaceholder: "Search vegetables...",
                    resultsFound: "results found",
                    showAll: "Show All",
                    categoriesMenu: "Categories"
                },

                ta: {
                    logo: "‡Æµ‡Æø.‡Æé‡Æ∏‡Øç ‡Æï‡Ææ‡ÆØ‡Øç‡Æï‡Æ±‡Æø‡Æï‡Æ≥‡Øç",
                    allCategories: "‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ‡ÆÆ‡Øç",
                    ooty: "‡Æä‡Æü‡Øç‡Æü‡Æø ‡Æï‡Ææ‡ÆØ‡Øç‡Æï‡Æ±‡Æø‡Æï‡Æ≥‡Øç",
                    country: "‡Æ®‡Ææ‡Æü‡Øç‡Æü‡ØÅ ‡Æï‡Ææ‡ÆØ‡Øç‡Æï‡Æ±‡Æø‡Æï‡Æ≥‡Øç",
                    onions: "‡Æµ‡ØÜ‡Æô‡Øç‡Æï‡Ææ‡ÆØ‡ÆÆ‡Øç & ‡Æö‡Æø‡Æ©‡Øç‡Æ© ‡Æµ‡ØÜ‡Æô‡Øç‡Æï‡Ææ‡ÆØ‡ÆÆ‡Øç",
                    spinach: "‡Æï‡ØÄ‡Æ∞‡Øà ‡Æµ‡Æï‡Øà‡Æï‡Æ≥‡Øç",
                    coconuts: "‡Æ§‡Øá‡Æô‡Øç‡Æï‡Ææ‡ÆØ‡Øç",
                    nuts: "‡Æï‡Øä‡Æü‡Øç‡Æü‡Øà‡Æï‡Æ≥‡Øç & ‡Æâ‡Æ≤‡Æ∞‡Øç ‡Æ™‡Æ¥‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                    budget: "‡Æ™‡Æü‡Øç‡Æú‡ØÜ‡Æü‡Øç ‡Æï‡Ææ‡ÆØ‡Øç‡Æï‡Æ±‡Æø‡Æï‡Æ≥‡Øç",
                    heroTitle: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡ØÄ‡Æü‡Øç‡Æü‡ØÅ ‡Æµ‡Ææ‡Æö‡Æ≤‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡Æï‡Ææ‡ÆØ‡Øç‡Æï‡Æ±‡Æø‡Æï‡Æ≥‡Øç",
                    heroSubtitle: "‡Æµ‡ÆØ‡Æ≤‡Æø‡Æ≤‡Øç ‡Æá‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æµ‡ØÄ‡Æü‡ØÅ ‡Æµ‡Æ∞‡Øà, ‡ÆÆ‡Æ£‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ≥‡Øç ‡Æü‡ØÜ‡Æ≤‡Æø‡Æµ‡Æ∞‡Æø. ‡Æ§‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æâ‡Æ§‡Øç‡Æ§‡Æ∞‡Æµ‡Ææ‡Æ§‡ÆÆ‡Øç!",
                    productsTitle: "‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æü‡Øç‡Æï‡Æ≥‡Øç",
                    contactTitle: "‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ ‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                    phone: "‡Æ§‡Øä‡Æ≤‡Øà‡Æ™‡Øá‡Æö‡Æø",
                    email: "‡ÆÆ‡Æø‡Æ©‡Øç‡Æ©‡Æû‡Øç‡Æö‡Æ≤‡Øç",
                    whatsapp: "‡Æµ‡Ææ‡Æü‡Øç‡Æ∏‡Øç‡ÆÜ‡Æ™‡Øç",
                    addToCart: "‡Æï‡Ææ‡Æ∞‡Øç‡Æü‡Øç‡Æü‡Æø‡Æ≤‡Øç ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï",
                    cartItems: "‡Æï‡Ææ‡Æ∞‡Øç‡Æü‡Øç‡Æü‡Æø‡Æ≤‡Øç ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æü‡Øç‡Æï‡Æ≥‡Øç",
                    orderSummary: "‡ÆÜ‡Æ∞‡Øç‡Æü‡Æ∞‡Øç ‡Æö‡ØÅ‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ÆÆ‡Øç",
                    total: "‡ÆÆ‡Øä‡Æ§‡Øç‡Æ§‡ÆÆ‡Øç: ",
                    deliveryTime: "‡Æü‡ØÜ‡Æ≤‡Æø‡Æµ‡Æ∞‡Æø ‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç:",
                    morning: "‡Æï‡Ææ‡Æ≤‡Øà",
                    afternoon: "‡ÆÆ‡Æ§‡Æø‡ÆØ‡ÆÆ‡Øç",
                    evening: "‡ÆÆ‡Ææ‡Æ≤‡Øà",
                    express: "‡Æé‡Æï‡Øç‡Æ∏‡Øç‡Æ™‡Æø‡Æ∞‡Æ∏‡Øç",
                    expressTime: "‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ 30 ‡Æ®‡Æø‡ÆÆ‡Æø‡Æü‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                    placeOrder: "‡Æµ‡Ææ‡Æü‡Øç‡Æ∏‡Øç‡ÆÜ‡Æ™‡Øç ‡ÆÆ‡ØÇ‡Æ≤‡ÆÆ‡Øç ‡ÆÜ‡Æ∞‡Øç‡Æü‡Æ∞‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                    remove: "‡ÆÖ‡Æï‡Æ±‡Øç‡Æ±‡ØÅ",
                    searchPlaceholder: "‡Æï‡Ææ‡ÆØ‡Øç‡Æï‡Æ±‡Æø‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç...",
                    resultsFound: "‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ‡Æï‡Æ≥‡Øç ‡Æï‡Æø‡Æü‡Øà‡Æ§‡Øç‡Æ§‡Æ©",
                    showAll: "‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æï‡Ææ‡Æü‡Øç‡Æü‡ØÅ",
                    categoriesMenu: "‡Æµ‡Æï‡Øà‡Æï‡Æ≥‡Øç"
                }
            }
        };

        // Load configuration from external config.json or use fallback
        async function loadConfiguration() {
            try {
                const response = await fetch('./config.json');
                if (response.ok) {
                    config = await response.json();
                    console.log('Loaded external configuration from config.json');
                } else {
                    config = fallbackConfig;
                    console.log('Using fallback embedded configuration');
                }
            } catch (error) {
                config = fallbackConfig;
                console.log('Error loading external config, using embedded fallback:', error.message);
            }
        }

        // Global variables
        let cart = {};
        let currentLanguage = 'ta'; // Default to Tamil
        let currentCategory = 'all';
        let selectedDeliveryTime = '';
        let quantities = {};
        let searchQuery = '';
        let currentBudgetProductId = '';

        let filteredProducts = [];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', async function() {
            await loadConfiguration();
            initializeApp();
        });

        function initializeApp() {
            updateLanguageButton();
            generateDynamicCategories();
            updateLanguage();
            setupSearchAndFilter();
            renderAllProducts(); // Start with showing all products
            updateCartDisplay();
        }

        // Language toggle functionality
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'ta' ? 'en' : 'ta';
            updateLanguageButton();
            updateLanguage();
        }

        function updateLanguageButton() {
            const languageBtn = document.getElementById('languageSwitcher');
            languageBtn.textContent = currentLanguage === 'ta' ? 'En' : '‡Æ§';
        }

        // Generate dynamic categories from config
        function generateDynamicCategories() {
            generateCategoryTabs();
            generateSubmenuCategories();
        }

        function generateCategoryTabs() {
            const categoryTabs = document.getElementById('categoryTabs');
            if (!categoryTabs || !config.categories) return;
            
            let html = `
                <button class="tab-btn active" onclick="showCategory('all')">
                    <i class="fas fa-th-large"></i>
                    <span data-lang="allCategories">All</span>
                </button>
            `;
            
            // Get visible categories and sort by order
            const visibleCategories = Object.entries(config.categories)
                .filter(([key, category]) => category.visible !== false)
                .sort((a, b) => (a[1].order || 0) - (b[1].order || 0));
            
            visibleCategories.forEach(([categoryKey, category]) => {
                html += `
                    <button class="tab-btn" onclick="showCategory('${categoryKey}')">
                        <span style="font-size: 1.5rem;">${category.icon || 'ü•¨'}</span>
                        <span data-lang="${categoryKey}">${category.name?.en || categoryKey}</span>
                    </button>
                `;
            });
            
            categoryTabs.innerHTML = html;
        }

        function generateSubmenuCategories() {
            const submenuCategories = document.querySelector('.submenu-categories');
            if (!submenuCategories || !config.categories) return;
            
            let html = `
                <button class="submenu-btn active" onclick="showCategory('all')" data-lang="all">All Products</button>
            `;
            
            // Get visible categories and sort by order
            const visibleCategories = Object.entries(config.categories)
                .filter(([key, category]) => category.visible !== false)
                .sort((a, b) => (a[1].order || 0) - (b[1].order || 0));
            
            visibleCategories.forEach(([categoryKey, category]) => {
                html += `
                    <button class="submenu-btn" onclick="showCategory('${categoryKey}')" data-lang="${categoryKey}">
                        ${category.name?.en || categoryKey}
                    </button>
                `;
            });
            
            submenuCategories.innerHTML = html;
        }

        // Enhanced product card rendering with new schema support
        function renderProductCard(product, productId, quantity, productName, isAvailable) {
            const unavailableClass = !isAvailable ? ' unavailable' : '';
            
            // Generate product image with multiple image support
            const imageHtml = generateProductImage(product, productName);
            
            // Generate badges for tags
            const badgesHtml = generateProductBadges(product);
            
            // Generate special offer display
            const specialOfferHtml = generateSpecialOffer(product);
            
            // Generate combo details if it's a combo product
            const comboDetailsHtml = generateComboDetails(product);
            
            return `
                <div class="product-card${unavailableClass}">
                    ${badgesHtml}
                    ${specialOfferHtml}
                    <div class="product-image">
                        ${imageHtml}
                    </div>
                    ${comboDetailsHtml}
                    <div class="product-info">
                        <h4 class="product-name">${productName}</h4>
                        <div class="price-unit">
                            <p class="product-price">‚Çπ${calculateDisplayPrice(product)}</p>
                            <p class="product-unit">${product.displayUnitValue || product.unitValue || 1} ${product.displayUnit || product.unit}</p>
                        </div>
                    </div>
                    ${quantity > 0 ? `
                        <div class="quantity-controls">
                            <button class="qty-minus" onclick="updateQuantity('${productId}', -1)">‚àí</button>
                            <span class="qty-display">${quantity}</span>
                            <button class="qty-plus" onclick="updateQuantity('${productId}', 1)">+</button>
                        </div>
                    ` : `
                        <div class="product-actions">
                            <button class="add-to-cart-btn" onclick="updateQuantity('${productId}', 1)" ${!isAvailable ? 'disabled' : ''}>
                                ${isAvailable ? 'Add to Cart' : 'Out of Stock'}
                            </button>
                            ${product.isBudgetPick && !product.isCombo ? `<button class="budget-pick-btn" onclick="showBudgetPopup('${productId}')">Budget Pick</button>` : ''}
                            ${product.isCombo ? `<button class="combo-btn" onclick="showComboPopup('${productId}')">Combo Deal</button>` : ''}
                        </div>
                    `}
                </div>
            `;
        }

        function generateProductImage(product, productName) {
            // Support for multiple images with fallback
            if (product.images && product.images.length > 0) {
                const primaryImage = product.images[0];
                const hasMultipleImages = product.images.length > 1;
                
                return `
                    <div class="product-image-gallery">
                        <img src="${primaryImage}" alt="${productName}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="product-icon-fallback" style="display: none; align-items: center; justify-content: center; height: 100%; font-size: 3rem;">
                            ${product.icon || 'ü•¨'}
                        </div>
                        ${hasMultipleImages ? `
                            <div class="image-indicator">
                                <i class="fas fa-images"></i>
                                ${product.images.length}
                            </div>
                        ` : ''}
                    </div>
                `;
            } else if (product.image) {
                // Backwards compatibility with single image
                return `
                    <img src="${product.image}" alt="${productName}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="product-icon-fallback" style="display: none; align-items: center; justify-content: center; height: 100%; font-size: 3rem;">
                        ${product.icon || 'ü•¨'}
                    </div>
                `;
            } else {
                // Icon fallback
                return `<span style="font-size: 3rem;">${product.icon || 'ü•¨'}</span>`;
            }
        }

        function generateProductBadges(product) {
            let badgesHtml = '<div class="status-badges">';
            
            // Add combo badge for combo products
            if (product.isCombo) {
                badgesHtml += '<span class="badge-combo">‡Æï‡ØÇ‡Æü‡Øç‡Æü‡ØÅ</span>';
            }
            
            // Add tag-based badges
            if (product.tags && product.tags.length > 0) {
                product.tags.forEach(tag => {
                    if (tag === 'new-arrival') {
                        badgesHtml += '<span class="badge new-arrival">‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ‡Æ§‡ØÅ</span>';
                    }
                });
            }
            
            badgesHtml += '</div>';
            return badgesHtml;
        }

        function generateSpecialOffer(product) {
            if (!product.specialOffer) return '';
            
            return `<div class="special-offer">${product.specialOffer}</div>`;
        }

        function generateComboDetails(product) {
            if (!product.isCombo || !product.combo || product.combo.length === 0) return '';
            
            const comboHints = product.combo.map(comboItem => {
                // Find the product by categoryKey and productId
                const categoryProducts = config.products[comboItem.categoryKey];
                if (!categoryProducts) return null;
                
                const foundProduct = categoryProducts.find(p => p.id === comboItem.productId);
                if (!foundProduct) return null;
                
                // Get localized name
                const itemName = foundProduct.name[currentLanguage] || foundProduct.name.en;
                
                // Build display text with unit and unitValue if available, but always show quantity (amount)
                let displayText = itemName;
                if (comboItem.unit && comboItem.unitValue) {
                    displayText += ` - ${comboItem.unitValue} ${comboItem.unit} (‚Çπ${comboItem.quantity})`;
                } else if (comboItem.unit) {
                    displayText += ` - ${comboItem.unit} (‚Çπ${comboItem.quantity})`;
                } else {
                    displayText += ` (‚Çπ${comboItem.quantity})`;
                }
                
                return displayText;
            }).filter(item => item !== null);
            
            if (comboHints.length === 0) return '';
            
            return `
                <div class="combo-details">
                    <small class="combo-label">Combo includes:</small>
                    <div class="combo-items-list">
                        ${comboHints.slice(0, 2).map(item => 
                            `<span class="combo-item">${item}</span>`
                        ).join('')}
                        ${comboHints.length > 2 ? `<span class="combo-more">+${comboHints.length - 2} more</span>` : ''}
                    </div>
                </div>
            `;
        }



        function renderAllProducts() {
            const categoryContent = document.getElementById('categoryContent');
            const texts = config.localization[currentLanguage];
            let allProducts = [];

            // Collect all products from all categories
            Object.keys(config.products).forEach(category => {
                config.products[category].forEach((product, index) => {
                    allProducts.push({
                        ...product,
                        category: category,
                        originalIndex: index
                    });
                });
            });

            let html = `
                <div class="category-section active fade-in">
                    <h3 class="category-title">${texts.allCategories}</h3>
                    <div class="products">
            `;

            allProducts.forEach(product => {
                const productId = product.id || `${product.category}_${product.originalIndex}`;
                const quantity = quantities[productId] || 0;
                const productName = product.name[currentLanguage] || product.name.en;
                const isAvailable = product.available !== false;
                
                html += renderProductCard(product, productId, quantity, productName, isAvailable);
            });

            html += '</div></div>';
            categoryContent.innerHTML = html;
        }

        // Category management
        function showCategory(category) {
            currentCategory = category;
            
            // Update active tab
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Find the clicked button and add active class
            const clickedBtn = event.target.closest('.tab-btn');
            if (clickedBtn) {
                clickedBtn.classList.add('active');
            }
            
            if (category === 'all') {
                renderAllProducts();
            } else {
                renderCategory(category);
            }
        }

        function renderCategory(category) {
            if (category === 'all') {
                renderAllProducts();
                return;
            }

            const categoryContent = document.getElementById('categoryContent');
            const products = config.products[category];
            const texts = config.localization[currentLanguage];
            
            if (!products) {
                categoryContent.innerHTML = '<div class="no-results"><h3>Category not found</h3></div>';
                return;
            }
            
            let html = `
                <div class="category-section active fade-in">
                    <h3 class="category-title">${texts[category]}</h3>
                    <div class="products">
            `;
            
            products.forEach((product, index) => {
                const productId = product.id || `${category}_${index}`;
                const quantity = quantities[productId] || 0;
                const productName = product.name[currentLanguage] || product.name.en;
                const isAvailable = product.available !== false;
                
                html += renderProductCard(product, productId, quantity, productName, isAvailable);
            });
            
            html += '</div></div>';
            categoryContent.innerHTML = html;
        }

        // Enhanced quantity management with new product ID format support
        function updateQuantity(productId, change) {
            if (!quantities[productId]) quantities[productId] = 0;
            const oldQuantity = quantities[productId];
            quantities[productId] = Math.max(0, quantities[productId] + change);
            
            // Find product using either new ID format or old category_index format
            const product = findProductById(productId);
            
            if (!product) {
                console.error('Product not found for ID:', productId);
                return;
            }
            
            // Check if product is available before adding to cart
            if (product.available === false && quantities[productId] > 0) {
                quantities[productId] = 0; // Reset quantity for unavailable products
                return;
            }
            
            // Handle cart updates based on quantity changes
            if (quantities[productId] > 0) {
                // Add or update cart
                if (cart[productId]) {
                    cart[productId].quantity = quantities[productId];
                } else {
                    cart[productId] = {
                        name: product.name,
                        price: calculateDisplayPrice(product),
                        unit: product.displayUnit || product.unit,
                        quantity: quantities[productId],
                        category: product.category || extractCategoryFromId(productId),
                        productId: product.id || productId
                    };
                }
            } else {
                // Remove from cart when quantity is 0
                delete cart[productId];
            }
            
            // Re-render to update the display with reduced flickering
            if (searchQuery) {
                performSearch();
            } else if (currentCategory === 'all') {
                renderAllProducts();
            } else {
                renderCategory(currentCategory);
            }
            
            updateCartDisplay();
            if (Object.keys(cart).length > 0) {
                showFrozenFooter();
            } else {
                hideFrozenFooter();
            }
        }

        function findProductById(productId) {
            // First try to find by product.id in new format
            for (const [category, products] of Object.entries(config.products)) {
                const product = products.find(p => p.id === productId);
                if (product) {
                    return { ...product, category };
                }
            }
            
            // Fallback to old category_index format
            const [category, indexStr] = productId.split('_');
            const index = parseInt(indexStr);
            if (config.products[category] && config.products[category][index]) {
                return { ...config.products[category][index], category };
            }
            
            return null;
        }

        function extractCategoryFromId(productId) {
            // Extract category from either new ID format or old category_index format
            if (productId.includes('_')) {
                return productId.split('_')[0];
            }
            
            // For new ID format, find the category this product belongs to
            for (const [category, products] of Object.entries(config.products)) {
                if (products.some(p => p.id === productId)) {
                    return category;
                }
            }
            
            return 'unknown';
        }







        function removeFromCart(productId) {
            delete cart[productId];
            // Also clean up quantities to ensure fresh start for re-adding
            if (quantities[productId]) {
                quantities[productId] = 0;
            }
            updateCartDisplay();
            updateOrderSummary();
            
            if (Object.keys(cart).length === 0) {
                hideFrozenFooter();
            }
        }

        function updateCartItemQuantity(productId, change) {
            if (!cart[productId]) return;
            
            cart[productId].quantity = Math.max(1, cart[productId].quantity + change);
            updateCartDisplay();
            updateOrderSummary();
        }

        // Calculate proportional price based on display unit value
        function calculateDisplayPrice(product) {
            if (!product.displayUnitValue || product.displayUnitValue === product.unitValue) {
                return product.price;
            }
            
            const actualUnitValue = product.unitValue || 1;
            const displayUnitValue = product.displayUnitValue;
            const actualUnit = product.unit;
            const displayUnit = product.displayUnit || product.unit;
            
            // Handle unit conversion (kg to grams)
            let conversionFactor = 1;
            if (actualUnit === "Kg" && displayUnit === "Grams") {
                conversionFactor = 1000; // 1 kg = 1000 grams
            } else if (actualUnit === "Grams" && displayUnit === "Kg") {
                conversionFactor = 0.001; // 1 gram = 0.001 kg
            }
            
            // Convert display unit value to actual unit value for calculation
            const convertedDisplayValue = displayUnitValue / conversionFactor;
            
            // Calculate proportional price: (price * convertedDisplayValue) / actualUnitValue
            const proportionalPrice = (product.price * convertedDisplayValue) / actualUnitValue;
            
            // Round up to nearest integer
            return Math.ceil(proportionalPrice);
        }

        // Cart display updates
        function updateCartDisplay() {
            const cartCount = document.getElementById('cartCount');
            const footerCartItems = document.getElementById('footerCartItems');
            const footerCartTotal = document.getElementById('footerCartTotal');
            const texts = config.localization[currentLanguage];
            
            const totalItems = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            cartCount.textContent = totalItems;
            footerCartItems.textContent = `${totalItems} ${texts.cartItems}`;
            footerCartTotal.textContent = `‚Çπ${totalPrice}`;
        }

        function showFrozenFooter() {
            const frozenFooter = document.getElementById('frozenFooter');
            frozenFooter.classList.add('show');
        }

        function hideFrozenFooter() {
            const frozenFooter = document.getElementById('frozenFooter');
            frozenFooter.classList.remove('show');
        }

        // Order summary functionality
        function toggleOrderSummary() {
            const overlay = document.getElementById('orderSummaryOverlay');
            const panel = document.getElementById('orderSummaryPanel');
            const arrow = document.getElementById('footerCartArrow');
            
            if (overlay.classList.contains('show')) {
                closeOrderSummary();
            } else {
                overlay.classList.add('show');
                panel.classList.add('show');
                arrow.classList.add('up');
                updateOrderSummary();
            }
        }

        function closeOrderSummary() {
            const overlay = document.getElementById('orderSummaryOverlay');
            const panel = document.getElementById('orderSummaryPanel');
            const arrow = document.getElementById('footerCartArrow');
            
            overlay.classList.remove('show');
            panel.classList.remove('show');
            arrow.classList.remove('up');
        }

        // Smart unit display with gram-to-kg conversion
        function getSmartUnitDisplay(quantity, unit, price) {
            const totalPrice = price * quantity;
            
            // Check if it's a gram-based unit
            if (unit && (unit.toLowerCase().includes('gram') || unit === 'Grams')) {
                // Calculate gram equivalents
                const totalGrams = quantity * price; // Assuming price represents grams per unit
                
                // Special case: if price is the per-gram price, calculate differently
                // For products priced per gram, quantity is the number of units and price is per gram
                const actualGrams = quantity * 250; // Assuming 250g standard units for conversion
                
                if (actualGrams >= 1000) {
                    const kg = Math.floor(actualGrams / 1000);
                    const remainingGrams = actualGrams % 1000;
                    
                    if (remainingGrams === 0) {
                        return `‚Çπ${price} √ó ${quantity} = ‚Çπ${totalPrice} (${kg}kg)`;
                    } else {
                        return `‚Çπ${price} √ó ${quantity} = ‚Çπ${totalPrice} (${kg}kg ${remainingGrams}g)`;
                    }
                } else {
                    return `‚Çπ${price} √ó ${quantity} = ‚Çπ${totalPrice} (${actualGrams}g)`;
                }
            }
            
            // Default display for non-gram units
            return `‚Çπ${price} √ó ${quantity} = ‚Çπ${totalPrice}`;
        }

        function updateOrderSummary() {
            const cartItems = document.getElementById('cartItems');
            const orderTotal = document.getElementById('orderTotal');
            const texts = config.localization[currentLanguage];
            
            let html = '';
            let totalPrice = 0;
            
            Object.keys(cart).forEach(productId => {
                const item = cart[productId];
                const itemTotal = item.price * item.quantity;
                totalPrice += itemTotal;
                
                // Get localized product name
                const productName = typeof item.name === 'object' 
                    ? (item.name[currentLanguage] || item.name.en)
                    : item.name;
                
                // Smart unit conversion for grams
                const displayInfo = getSmartUnitDisplay(item.quantity, item.unit, item.price);
                
                html += `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${productName}</div>
                            <div class="cart-item-price">${displayInfo}</div>
                        </div>
                        <div class="cart-item-controls">
                            <button class="qty-btn" onclick="updateCartItemQuantity('${productId}', -1)">‚àí</button>
                            <span class="quantity">${item.quantity}</span>
                            <button class="qty-btn" onclick="updateCartItemQuantity('${productId}', 1)">+</button>
                            <button class="remove-item-btn" onclick="removeFromCart('${productId}')">${texts.remove}</button>
                        </div>
                    </div>
                `;
            });
            
            cartItems.innerHTML = html;
            orderTotal.textContent = `‚Çπ${totalPrice}`;
        }

        // Delivery time selection
        function selectDeliveryTime(time) {
            selectedDeliveryTime = time;
            document.querySelectorAll('.delivery-option').forEach(option => {
                option.classList.remove('selected');
            });
            // Find the clicked delivery option element and add selected class
            const clickedOption = event.target.closest('.delivery-option');
            if (clickedOption) {
                clickedOption.classList.add('selected');
            }
        }

        // Place order functionality
        function placeOrder() {
            if (Object.keys(cart).length === 0) {
                alert('Please add items to cart first');
                return;
            }
            
            if (!selectedDeliveryTime) {
                alert('Please select delivery time');
                return;
            }
            
            let message = 'New Order from Vs Vegetables:\n\n';
            
            let sno = 1;
            Object.keys(cart).forEach(productId => {
                const item = cart[productId];
                const itemTotal = item.price * item.quantity;
                
                // Get localized product name
                const productName = typeof item.name === 'object' 
                    ? (item.name[currentLanguage] || item.name.en)
                    : item.name;
                
                message += `${sno}. ${productName}: ${item.quantity} √ó ‚Çπ${item.price} = ‚Çπ${itemTotal}\n`;
                sno++;
            });
            
            const totalPrice = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);
            message += `\nTotal: ‚Çπ${totalPrice}\n`;
            message += `Delivery Time: ${selectedDeliveryTime}\n\n`;
            message += 'Thank you for choosing Vs Vegetables!';
            
            const phoneNumber = '918300813853';
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            
            window.open(whatsappUrl, '_blank');
        }

        // Search and Filter Functionality
        function setupSearchAndFilter() {
            const searchInput = document.getElementById('searchInput');
            const clearSearch = document.getElementById('clearSearch');
            
            // Search functionality with debouncing
            let searchTimeout;
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    searchQuery = this.value.toLowerCase().trim();
                    
                    if (searchQuery.length > 0) {
                        clearSearch.classList.add('show');
                    } else {
                        clearSearch.classList.remove('show');
                    }
                    
                    performSearch();
                }, 300);
            });

            // Update placeholder text when language changes
            updateSearchPlaceholder();
        }

        function updateSearchPlaceholder() {
            const searchInput = document.getElementById('searchInput');
            const texts = config.localization[currentLanguage];
            if (searchInput && texts.searchPlaceholder) {
                searchInput.placeholder = texts.searchPlaceholder;
            }
        }

        function clearSearch() {
            const searchInput = document.getElementById('searchInput');
            const clearSearch = document.getElementById('clearSearch');
            
            searchInput.value = '';
            searchQuery = '';
            clearSearch.classList.remove('show');
            
            performSearch();
        }

        function performSearch() {
            // Get all products
            const allProducts = getAllProductsArray();
            
            // Apply search filter
            let results = allProducts;
            if (searchQuery) {
                results = results.filter(product => {
                    const productName = (product.name[currentLanguage] || product.name.en).toLowerCase();
                    const categoryName = config.localization[currentLanguage][product.category]?.toLowerCase() || '';
                    return productName.includes(searchQuery) || categoryName.includes(searchQuery);
                });
            }
            
            // Store filtered results
            filteredProducts = results;
            
            // Show search results
            if (searchQuery) {
                showSearchResults(results);
            } else {
                document.getElementById('searchResultsInfo').style.display = 'none';
                if (currentCategory === 'all') {
                    renderAllProducts();
                } else {
                    renderCategory(currentCategory);
                }
            }
        }

        function getAllProductsArray() {
            const allProducts = [];
            Object.keys(config.products).forEach(category => {
                config.products[category].forEach((product, index) => {
                    allProducts.push({
                        ...product,
                        category: category,
                        originalIndex: index
                    });
                });
            });
            return allProducts;
        }

        function showSearchResults(results) {
            const categoryContent = document.getElementById('categoryContent');
            const searchResultsInfo = document.getElementById('searchResultsInfo');
            const resultsCount = document.getElementById('resultsCount');
            const texts = config.localization[currentLanguage];
            
            // Update results count
            resultsCount.textContent = results.length;
            searchResultsInfo.style.display = 'flex';
            
            if (results.length === 0) {
                categoryContent.innerHTML = `
                    <div class="no-results">
                        <h3>No products found</h3>
                        <p>Try adjusting your search or filters</p>
                    </div>
                `;
                return;
            }
            
            // Render filtered products
            let html = `
                <div class="category-section active fade-in">
                    <h3 class="category-title">Search Results</h3>
                    <div class="products">
            `;
            
            results.forEach(product => {
                const productId = product.id || `${product.category}_${product.originalIndex}`;
                const quantity = quantities[productId] || 0;
                const productName = product.name[currentLanguage] || product.name.en;
                const isAvailable = product.available !== false;
                
                html += renderProductCard(product, productId, quantity, productName, isAvailable);
            });
            
            html += '</div></div>';
            categoryContent.innerHTML = html;
        }

        function showAllProducts() {
            // Clear search
            const searchInput = document.getElementById('searchInput');
            const clearSearch = document.getElementById('clearSearch');
            
            searchInput.value = '';
            searchQuery = '';
            clearSearch.classList.remove('show');
            
            // Hide search results info
            document.getElementById('searchResultsInfo').style.display = 'none';
            
            // Show all products
            currentCategory = 'all';
            renderAllProducts();
            
            // Update active category button
            updateSubmenuButtons('all');
        }

        function showCategory(category) {
            // Clear search
            const searchInput = document.getElementById('searchInput');
            const clearSearch = document.getElementById('clearSearch');
            
            searchInput.value = '';
            searchQuery = '';
            clearSearch.classList.remove('show');
            
            // Hide search results info
            document.getElementById('searchResultsInfo').style.display = 'none';
            
            // Update category and render
            currentCategory = category;
            if (category === 'all') {
                renderAllProducts();
            } else {
                renderCategory(category);
            }
            
            // Update active category button
            updateSubmenuButtons(category);
        }

        function updateSubmenuButtons(activeCategory) {
            document.querySelectorAll('.submenu-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Find and activate the correct button
            document.querySelectorAll('.submenu-btn').forEach(btn => {
                const onclick = btn.getAttribute('onclick');
                if (onclick && onclick.includes(`'${activeCategory}'`)) {
                    btn.classList.add('active');
                }
            });
        }

        // Enhanced update language function to work with dynamic categories
        function updateLanguage() {
            const texts = config.localization[currentLanguage];
            
            // Update static text elements
            document.querySelectorAll('[data-lang]').forEach(element => {
                const key = element.getAttribute('data-lang');
                if (texts[key]) {
                    element.textContent = texts[key];
                } else if (config.categories && config.categories[key]) {
                    // Handle category names dynamically
                    const categoryName = config.categories[key].name[currentLanguage] || config.categories[key].name.en;
                    element.textContent = categoryName;
                }
            });
            
            // Update search placeholder
            updateSearchPlaceholder();
            
            // Re-generate dynamic categories with new language
            generateDynamicCategories();
            
            // Re-render current view
            if (searchQuery) {
                performSearch();
            } else if (currentCategory === 'all') {
                renderAllProducts();
            } else {
                renderCategory(currentCategory);
            }
            updateCartDisplay();
        }

        // Budget Pick Functions
        function showBudgetPopup(productId) {
            currentBudgetProductId = productId;
            const product = findProductById(productId);
            
            if (!product) {
                console.error('Product not found for budget popup:', productId);
                return;
            }
            
            const productName = product.name[currentLanguage] || product.name.en;
            
            // Update popup content
            document.getElementById('budgetProductName').textContent = productName;
            
            // Populate budget options
            const budgetOptionsContainer = document.getElementById('budgetOptions');
            budgetOptionsContainer.innerHTML = '';
            
            if (product.budgetOptions) {
                product.budgetOptions.forEach(amount => {
                    const optionBtn = document.createElement('button');
                    optionBtn.className = 'budget-option';
                    optionBtn.onclick = () => selectBudgetAmount(amount);
                    optionBtn.innerHTML = `
                        <div class="budget-option-amount">‚Çπ${amount}</div>
                        <div class="budget-option-label">Budget</div>
                    `;
                    budgetOptionsContainer.appendChild(optionBtn);
                });
            }
            
            // Show popup
            document.getElementById('budgetPopup').style.display = 'flex';
        }

        function closeBudgetPopup() {
            document.getElementById('budgetPopup').style.display = 'none';
            currentBudgetProductId = '';
        }

        // Combo Functions
        let currentComboProductId = null;
        let comboItems = {};

        function showComboPopup(productId) {
            currentComboProductId = productId;
            const product = findProductById(productId);
            
            if (!product) {
                console.error('Product not found for combo popup:', productId);
                return;
            }
            
            const productName = product.name[currentLanguage] || product.name.en;
            
            // Initialize combo items with main product and combo items
            comboItems = {
                main: {
                    name: productName,
                    price: product.price,
                    unitValue: product.displayUnitValue || product.unitValue || 1,
                    unit: product.unit
                }
            };
            
            // Add combo items from combo builder
            if (product.combo && product.combo.length > 0) {
                product.combo.forEach((comboItem, index) => {
                    // Find the product by categoryKey and productId
                    const categoryProducts = config.products[comboItem.categoryKey];
                    if (!categoryProducts) return;
                    
                    const foundProduct = categoryProducts.find(p => p.id === comboItem.productId);
                    if (!foundProduct) return;
                    
                    // Get localized name
                    const itemName = foundProduct.name[currentLanguage] || foundProduct.name.en;
                    
                    // Use combo builder unit/unitValue if provided, otherwise fall back to product defaults
                    const unitText = comboItem.unit || foundProduct.unit || 'item';
                    const unitValue = comboItem.unitValue || foundProduct.unitValue || 1;
                    
                    // Build display name with unit and unitValue, but always show quantity (amount)
                    let displayName = itemName;
                    if (comboItem.unit && comboItem.unitValue) {
                        displayName += ` - ${comboItem.unitValue} ${comboItem.unit} (‚Çπ${comboItem.quantity})`;
                    } else if (comboItem.unit) {
                        displayName += ` - ${comboItem.unit} (‚Çπ${comboItem.quantity})`;
                    } else {
                        displayName += ` (‚Çπ${comboItem.quantity})`;
                    }
                    
                    comboItems[`combo_${index}`] = {
                        name: displayName,
                        price: Math.floor(product.price * 0.2), // Default to 20% of main price
                        unitValue: unitValue,
                        unit: unitText,
                        quantity: comboItem.quantity
                    };
                });
            }
            
            renderComboPopup(productName, product);
            document.getElementById('comboPopup').style.display = 'flex';
        }

        function renderComboPopup(productName, product) {
            const popupContent = document.getElementById('comboPopupContent');
            const minimum = product.comboMinimum || 50;
            
            let html = `
                <div class="combo-popup-header">
                    <h3 class="combo-popup-title">${productName} Combo</h3>
                    <p class="combo-popup-subtitle">Customize your combo package</p>
                </div>
                
                <div class="combo-items-section">
                    <h4 class="combo-section-title">Main Item</h4>
                    <div class="combo-item-row">
                        <span>${comboItems.main.name} (${comboItems.main.unitValue} ${comboItems.main.unit})</span>
                        <input type="number" class="combo-price-input" value="${comboItems.main.price}" 
                               min="${minimum * 0.6}" onchange="updateComboPrice('main', this.value)">
                    </div>
                    
                    <h4 class="combo-section-title">Combo Items</h4>
            `;
            
            Object.keys(comboItems).forEach(key => {
                if (key !== 'main') {
                    const item = comboItems[key];
                    html += `
                        <div class="combo-item-row">
                            <span>${item.name}</span>
                            <input type="number" class="combo-price-input" value="${item.price}" 
                                   min="5" onchange="updateComboPrice('${key}', this.value)">
                        </div>
                    `;
                }
            });
            
            const total = calculateComboTotal();
            
            html += `
                </div>
                
                <div class="combo-total">
                    Total: ‚Çπ<span id="comboTotal">${total}</span>
                    <div style="font-size: 0.9rem; margin-top: 5px; opacity: 0.9;">
                        Minimum: ‚Çπ${minimum}
                    </div>
                </div>
                
                <div class="combo-popup-actions">
                    <button class="budget-popup-cancel" onclick="closeComboPopup()">Cancel</button>
                    <button class="add-to-cart-btn" onclick="addComboToCart()" 
                            ${total < minimum ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : ''}>
                        Add to Cart
                    </button>
                </div>
            `;
            
            popupContent.innerHTML = html;
        }

        function updateComboPrice(itemKey, value) {
            const price = parseFloat(value) || 0;
            comboItems[itemKey].price = price;
            
            const total = calculateComboTotal();
            document.getElementById('comboTotal').textContent = total;
            
            // Check minimum requirement
            const product = findProductById(currentComboProductId);
            const minimum = product.comboMinimum || 50;
            const addButton = document.querySelector('.combo-popup-actions .add-to-cart-btn');
            
            if (total < minimum) {
                addButton.disabled = true;
                addButton.style.opacity = '0.5';
                addButton.style.cursor = 'not-allowed';
            } else {
                addButton.disabled = false;
                addButton.style.opacity = '1';
                addButton.style.cursor = 'pointer';
            }
        }

        function calculateComboTotal() {
            return Object.values(comboItems).reduce((sum, item) => sum + item.price, 0);
        }

        function addComboToCart() {
            const total = calculateComboTotal();
            const product = findProductById(currentComboProductId);
            
            if (total < (product.comboMinimum || 50)) {
                alert(`Minimum order amount is ‚Çπ${product.comboMinimum || 50}`);
                return;
            }
            
            // Add to cart with combo details
            if (!quantities[currentComboProductId]) quantities[currentComboProductId] = 0;
            quantities[currentComboProductId]++;
            
            // Add to cart object for display
            cart[currentComboProductId] = {
                name: product.name,
                price: total,
                unit: product.displayUnit || product.unit,
                quantity: quantities[currentComboProductId],
                category: 'combo',
                originalProduct: product.name[currentLanguage] || product.name.en,
                isCombo: true,
                comboItems: product.combo
            };
            
            // Store combo details for this instance
            if (!window.comboDetails) window.comboDetails = {};
            window.comboDetails[currentComboProductId] = {
                items: { ...comboItems },
                total: total
            };
            
            updateCartDisplay();
            
            // Show frozen footer if cart has items
            if (Object.keys(cart).length > 0) {
                showFrozenFooter();
            }
            
            closeComboPopup();
        }

        function closeComboPopup() {
            document.getElementById('comboPopup').style.display = 'none';
        }

        function selectBudgetAmount(amount) {
            if (currentBudgetProductId) {
                const product = findProductById(currentBudgetProductId);
                
                if (!product) {
                    console.error('Product not found for budget amount selection:', currentBudgetProductId);
                    return;
                }
                
                // Create a budget version with the selected amount
                const budgetProductId = `budget_${currentBudgetProductId}_${amount}`;
                
                if (!quantities[budgetProductId]) quantities[budgetProductId] = 0;
                quantities[budgetProductId] += 1;
                
                // Add to cart with budget pricing
                cart[budgetProductId] = {
                    name: product.name,
                    price: amount,
                    unit: product.displayUnit || product.unit,
                    quantity: quantities[budgetProductId],
                    category: 'budget',
                    originalProduct: product.name[currentLanguage] || product.name.en
                };
                
                updateCartDisplay();
                
                // Show frozen footer if cart has items
                if (Object.keys(cart).length > 0) {
                    showFrozenFooter();
                }
                
                // Re-render current view to update UI
                if (currentCategory === 'all') {
                    renderAllProducts();
                } else {
                    renderCategory(currentCategory);
                }
                
                closeBudgetPopup();
            }
        }

    </script>
</body>
</html>
